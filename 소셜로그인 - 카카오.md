```
사용자에게 직접 개인정보를 입력받지 않고 카카오나 네이버에서 인증을 거친 뒤 로그인, 회원가입을 수행하는 프로세스를 소셜로그인이라 한다. 이전 bank 프로젝트에 카카오 로그인을 적용해보자.
```

>&nbsp;사용자에게 직접 개인정보를 입력받지 않고 카카오나 네이버에서 인증을 거친 뒤 로그인, 회원가입을 수행하는 프로세스를 소셜로그인이라 한다. 이전 bank 프로젝트에 카카오 로그인을 적용해보자.


## 1. kakao developers

[카카오개발자페이지](https://developers.kakao.com/)

카카오 개발자 페이지로 이동하여 애플리케이션 추가를 합니다.

> 내 애플리케이션에서 애플리케이션 추가하기 선택합니다.
![[Pasted image 20230927004213.png]]
앱이름, 사업자명을 적당한 이름을 넣고 저장을 누릅니다.
![[Pasted image 20230927014908.png]]
## 1. 애플리케이


## 1. 애플리케이션 항목 - 등록
## 2. REST API키 가져오기 

## 3. 플랫폼 설정하기
> 3-1. 플랫폼 설정하기 클릭

![](https://i.imgur.com/lyPO9ZW.png)

> 3-2. 도메인 입력하기
	http://localhost/
  
![](https://i.imgur.com/2rmEtDN.png)


![](https://i.imgur.com/qB125zS.png)


![](https://i.imgur.com/XCaWTc0.png)

![](https://i.imgur.com/gCD06NW.png)

![](https://i.imgur.com/pE9sqw9.png)

```
http://localhost:80/user/kakao/callback
```

-  카카오 로그인 REST API 문서
https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api

4.  동의항목 설정하기 
https://developers.kakao.com/console/app/974646/product/login/scope 
![](https://i.imgur.com/kOS3qrM.png)

- 기존의 프로젝트(bank)를 사용하여 로그인 테스트

7. 로그인 버튼 다운로드

![[kakao_login_simple.zip]]

8. image 폴더 생성 서버에 이미지 저장

![](https://i.imgur.com/Bf8hHnR.png)



9. 요청 경로 

```
https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=${REST_API_KEY}&redirect_uri=${REDIRECT_URI}
```

```
https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=d756e532cfa99b1914e7dffa847d96ab&redirect_uri=http://localhost:80/user/kakao/callback
```

10. a태그에 경로 넣기
11.  redirectURL 컨트롤러 설계하기

```java
// http://localhost:80/user/kakao/callback?code="authCode"

@GetMapping("/kakao/callback")
@ResponseBody // data 반환 명시
public String kakaoCallback(String code) {
System.out.println("메서드 동작");
return "카카오 인가 코드 확인 : " + code;
}
```


![](https://i.imgur.com/fcIRNNw.png)


12.  Access 토큰 받기
 위 인가코드를 이용하여 토큰을 받아야함 
 
 
 ![](https://i.imgur.com/gZRObwf.png)
 


```html
https://kauth.kakao.com/oauth/token
```


https://kauth.kakao.com/oauth/token


![](https://i.imgur.com/1Ly8MMk.png)


```java
// http://localhost:80/user/kakao/callback?code="authCode"

@GetMapping("/kakao/callback")
@ResponseBody // data 반환 명시
public String kakaoCallback(String code) {
//System.out.println("메서드 동작");

// POST 요청 - exchange() 메서드 활용
RestTemplate rt = new RestTemplate();

// Header 구성
HttpHeaders headers = new HttpHeaders();![[build.gradle]]
headers.add("Content-type", "application/x-www-form-urlencoded;charset=utf-8");

// body 구성
MultiValueMap<String, String> params = new LinkedMultiValueMap<String, String>();
params.add("grant_type", "authorization_code");
params.add("client_id", "d756e532cfa99b1914e7dffa847d96ab");
params.add("redirect_uri", "http://localhost:80/user/kakao/callback");
params.add("code", code);

// HttpEntity 결합 (헤더 + 바디)
HttpEntity<MultiValueMap<String, String>> reqMes = new HttpEntity<>(params, headers);

// HTTP 요청
ResponseEntity<String> response = rt.exchange("https://kauth.kakao.com/oauth/token", HttpMethod.POST, reqMes, String.class);

// 액세스 토큰
// 1. 회원가입 여부 확인
// - 최초 사용자라면 본인 회원가입 형식으로 회원가입 처리
// 2. 로그인 -> 세션 메모리에 사용자를 등록(세션 생성)

return "카카오 액세스 토큰 받기 완료 : " + response;
}
```


![](https://i.imgur.com/mWfKPKm.png)


![](https://i.imgur.com/nWv8m3f.png)
